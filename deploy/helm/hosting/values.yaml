image:
  coreApi:
    repository: hosting-core-api
    tag: latest
  worker:
    repository: hosting-worker
    tag: latest
  adminUi:
    repository: hosting-admin-ui
    tag: latest
  mcpServer:
    repository: hosting-mcp-server
    tag: latest
  pullPolicy: IfNotPresent

coreApi:
  replicas: 1
  port: 8090
  migrate: true
  migrateDir: /migrations/core
  hostNetwork: false
  resources: {}
  extraEnv: []

worker:
  replicas: 1
  hostNetwork: false
  resources: {}
  extraEnv: []

adminUi:
  replicas: 1
  port: 3001
  hostNetwork: false
  resources: {}
  extraEnv: []

mcpServer:
  enabled: false
  replicas: 1
  port: 8091
  hostNetwork: false
  apiUrl: "http://localhost:8090"
  resources: {}
  extraEnv: []

# Shared application config (non-secret, goes into ConfigMap)
config:
  logLevel: info
  registryUrl: ""
  acmeEmail: ""
  acmeDirectoryUrl: "https://acme-v02.api.letsencrypt.org/directory"
  oidcIssuerUrl: "http://api.hosting.localhost"
  auditLogRetentionDays: "90"
  backupRetentionDays: "30"
  regionId: ""
  clusterId: ""
  lokiUrl: "http://127.0.0.1:3100"
  tenantLokiUrl: "http://127.0.0.1:3101"
  internalNetworkCidr: "10.0.0.0/8"
  # LLM incident agent
  agentEnabled: "false"
  agentMaxConcurrent: "3"
  agentFollowerConcurrent: "5"
  llmBaseUrl: ""
  llmModel: "Qwen/Qwen2.5-72B-Instruct"
  llmMaxTurns: "10"

# Secrets — either inline or reference an existing K8s Secret
secrets:
  # If set, use this existing secret instead of creating one
  existingSecret: ""
  # Only used if existingSecret is empty:
  coreDatabaseUrl: ""
  powerdnsDatabaseUrl: ""
  stalwartAdminToken: ""
  secretEncryptionKey: ""
  llmApiKey: ""
  agentApiKey: "" # Dev: hst_agent_key_000000000000000 (created by `just create-agent-key`)
  sshCaPrivateKey: "" # PEM-encoded SSH CA private key (for web terminal)

# Temporal connection
temporal:
  address: "temporal:7233"
  tls:
    enabled: false
    # Secret containing tls.crt, tls.key, ca.crt
    existingSecret: ""
  # Set to true to deploy Temporal via sub-chart (evaluation only).
  server:
    enabled: false

# ---------------------------------------------------------------
# Optional bundled PostgreSQL (evaluation only — not for production).
# In production, use a managed PostgreSQL service and set
# secrets.coreDatabaseUrl / secrets.powerdnsDatabaseUrl directly.
# ---------------------------------------------------------------
postgresql:
  enabled: false
  # auth:
  #   username: hosting
  #   password: hosting
  #   database: hosting_core

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts: []
  #  - host: hosting.example.com
  #    paths:
  #      - path: /api/
  #        service: core-api
  #      - path: /docs
  #        service: core-api
  #      - path: /
  #        service: admin-ui
  tls: []
  #  - secretName: hosting-tls
  #    hosts:
  #      - hosting.example.com
