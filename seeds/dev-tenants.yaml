api_url: http://10.10.10.2:8090/api/v1
api_key: hst_dev_e2e_test_key_00000000
lb_traffic_url: https://10.10.10.70

region: dev
cluster: vm-cluster-1

region_runtimes:
  - runtime: php
    version: "8.5"
  - runtime: php
    version: "8.3"
  - runtime: node
    version: "22"
  - runtime: python
    version: "3.12"
  - runtime: ruby
    version: "3.3"
  - runtime: static
    version: "1"

brands:
  - id: "brand_acme_dev_000000000001"
    name: "Acme Hosting"
    base_hostname: "acme-hosting.test"
    primary_ns: "ns1.acme-hosting.test"
    secondary_ns: "ns2.acme-hosting.test"
    hostmaster_email: "hostmaster@acme-hosting.test"
    mail_hostname: "mail.acme-hosting.test"
    spf_includes: "mail.acme-hosting.test"
    dkim_selector: "default"
    dkim_public_key: "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC3N1hMySxnOOaLmBUF7w8k+BO0qOt5Id9mA6rYwjMY+A2sM4H2JFZmGn8ESrmqnN+S0i8k0bMPPPFLHjOSUYMbx52l5Y5gYmxlHPwi5q+8B3h7cLBnwf6R2vuHdZ1GEmU/GJqNEt1kD/JhbmMm9UEymCjacaLJB0qfNR89qM3QIDAQAB"
    dmarc_policy: "v=DMARC1; p=none"
    allowed_clusters:
      - vm-cluster-1

zones:
  - name: hosting.test
    brand: "Acme Hosting"
    tenant: acme-corp

oidc_clients:
  - id: cloudbeaver
    secret: cloudbeaver-secret
    name: CloudBeaver DB Admin
    redirect_uris:
      - http://dbadmin.hosting.test/oauth2/callback

tenants:
  - name: acme-corp
    brand: "Acme Hosting"
    customer_id: "cust_acme_dev_000000000001"
    shard: web-1
    sftp_enabled: true
    ssh_enabled: true
    subscriptions:
      - id: "sub_acme_dev_000000000001"
        name: default
    egress_rules:
      - cidr: "0.0.0.0/0"
        description: "Allow all IPv4 (dev)"
    ssh_keys:
      - name: dev-key
        public_key: "${SSH_PUBLIC_KEY}"
    webroots:
      - runtime: php
        runtime_version: "8.5"
        public_folder: public
        env_file_name: ".env"
        runtime_config:
          pm:
            max_children: 10
            start_servers: 3
            min_spare_servers: 2
            max_spare_servers: 5
            max_requests: 1000
          php_values:
            memory_limit: "256M"
            max_execution_time: "60"
            upload_max_filesize: "64M"
            post_max_size: "64M"
        env_vars:
          - name: CACHE_STORE
            value: file
            secret: false
          - name: QUEUE_CONNECTION
            value: database
            secret: false
          - name: BROADCAST_CONNECTION
            value: reverb
            secret: false
        fqdns:
          - fqdn: acme.hosting.test
            ssl_enabled: false
        fixture:
          tarball: .build/laravel-reverb.tar.gz
          env_vars:
            APP_NAME: AcmeApp
            APP_ENV: local
            APP_DEBUG: "true"
            APP_KEY: "${APP_KEY}"
            APP_URL: "http://${FQDN}"
            DB_CONNECTION: mysql
            DB_HOST: "${DB_HOST}"
            DB_PORT: "3306"
            DB_DATABASE: "${DB_NAME}"
            DB_USERNAME: "${DB_USER}"
            DB_PASSWORD: "${DB_PASS}"
            BROADCAST_CONNECTION: reverb
            QUEUE_CONNECTION: database
            CACHE_STORE: file
            REVERB_APP_ID: acme-reverb
            REVERB_APP_KEY: acme-reverb-key
            REVERB_APP_SECRET: acme-reverb-secret
            REVERB_HOST: "${FQDN}"
            REVERB_PORT: "80"
            REVERB_SCHEME: http
          setup_path: /api/setup
          hosts_entry: true
        daemons:
          - command: 'bash -c ''exec php artisan reverb:start --host="[$HOST]" --port="$PORT"'''
            proxy_path: /app
          - command: "php artisan queue:work --sleep=1 --tries=3 --timeout=30"
        cron_jobs:
          - schedule: "*/5 * * * *"
            command: "php artisan schedule:run"
            timeout_seconds: 120
            max_memory_mb: 256
      - runtime: php
        runtime_version: "8.3"
        public_folder: public
        env_file_name: ".env"
        service_hostname_enabled: true
    databases:
      - shard: db-1
        users:
          - suffix: _app
            password: dev-password-123
            privileges: [ALL]
        access_rules:
          - cidr: "192.168.1.0/24"
            description: "Office network"
    valkey_instances:
      - shard: valkey-1
        max_memory_mb: 128
        users:
          - username: acme_app
            password: dev-valkey-123
            privileges: ["+@all"]
            key_pattern: "~*"
    s3_buckets:
      - shard: storage-1
        public: true
        quota_bytes: 10737418240
    backups:
      - type: web
      - type: database
    email_accounts:
      - fqdn: acme.hosting.test
        address: info@acme.hosting.test
        display_name: Acme Info
        aliases:
          - address: contact@acme.hosting.test
          - address: hello@acme.hosting.test
        forwards:
          - destination: admin@example.com
            keep_copy: true
        autoreply:
          subject: "Thanks for reaching out!"
          body: "We received your message and will get back to you shortly."
          enabled: true
      - fqdn: acme.hosting.test
        address: support@acme.hosting.test
        display_name: Acme Support
        forwards:
          - destination: helpdesk@example.com
            keep_copy: false
          - destination: backup@example.com
            keep_copy: true
